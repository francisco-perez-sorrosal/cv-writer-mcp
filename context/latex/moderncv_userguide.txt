# moderncv LaTeX Package Reference

## Document Setup

### Basic Structure
```latex
\documentclass[<options>]{moderncv}
\moderncvstyle{<style>}
\moderncvcolor{<color>}
```

### Document Class Options
- **paper**: a4paper (default), a5paper, b5paper, letterpaper, legalpaper, executivepaper, landscape
- **font family**: sans, roman
- **font size**: 10pt, 11pt (default), 12pt
- **draft/final**: draft, final (default)

### Styles
- casual (default), classic, banking, oldstyle, fancy, contemporary

### Colors
- black, blue (default), burgundy, green, grey, orange, purple, red, cerulean (recommended for contemporary)

### Compiler Support
- Recommended: lualatex or xelatex (full icon support)
- Supported: pdflatex (limited icons)

### Font Family
```latex
\renewcommand{\familydefault}{<fontfamily>}
% \sfdefault = sans-serif, \rmdefault = roman
```

### Page Numbering
```latex
\nopagenumbers{}  % Suppress page numbers
```

### Encoding
```latex
\usepackage[utf8]{inputenc}  % If not using xelatex/lualatex
```

### Language Support
```latex
\usepackage{CJKutf8}  % For CJK users
% Note: babel with Spanish is incompatible
```

## Personal Data Commands

### Required/Core Commands
```latex
\name{<given name>}{<surname>}
\title{<title>}  % Job title, CV title, etc.
\born{<birth date>}
```

### Contact Information
```latex
\address{<street>}{<city and postcode>}{<country>}
\phone[<type>]{<phone number>}  % type: fax, fixed, mobile
\email{<email>}
\homepage{<web address>}
```

### Social Media
```latex
\social[<platform>]{<username or handle>}
```

**Supported platforms**: arxiv, battlenet, bitbucket, codeberg, discord, github, gitlab, googlescholar, inspire, instagram, linkedin, mastodon, matrix, orcid, playstation, researcherid, researchgate, signal, skype, soundcloud, stackoverflow, steam, telegram, tiktok, twitch, twitter, whatsapp, xbox, xing, youtube

### Additional Elements
```latex
\extrainfo{<extra information>}
\photo[<height>][<frame thickness>]{<filename>}
\quote{<quote>}
```

## CV Content Macros

### Structuring
```latex
\section{<title>}
\subsection{<title>}
```

### Entry Types

**Single item**:
```latex
\cvitem{<descriptor>}{<body>}
```

**Two-column item**:
```latex
\cvdoubleitem{<descriptor1>}{<body1>}{<descriptor2>}{<body2>}
```

**Three-column item**:
```latex
\cvtripleitem{<descriptor1>}{<body1>}{<descriptor2>}{<body2>}{<descriptor3>}{<body3>}
```

**Item with comment**:
```latex
\cvitemwithcomment{<descriptor>}{<skill level>}{<comment>}
```

**Entry (education/experience)**:
```latex
\cventry{<year-year>}{<degree/job title>}{<institution/employer>}{<city>}{<grade>}{<description>}
% Arguments 3-6 can be empty but must be present
% Use minipage or \newline{} for line breaks in description
```

**List items**:
```latex
\cvlistitem{<item>}
\cvlistdoubleitem{<item1>}{<item2>}
```

**Multi-column layout**:
```latex
\begin{cvcolumns}
  \cvcolumn{<category1>}{<content>}
  \cvcolumn{<category2>}{<content>}
  \cvcolumn[<width>]{<content>}  % width: 0-1
\end{cvcolumns}
```

### Skill Matrix

**Graphical skill representation (0-5 scale)**:
```latex
\cvskill{<0-5>}
```

**Legend**:
```latex
\cvskilllegend  % Standard form
\cvskilllegend*[<post-padding>][<level1>][<level2>][<level3>][<level4>][<level5>]{<descriptor>}
% * = include dashed line
% post-padding must be valid length (1em, 1ex)
```

**Plain legend (levels 1-3 in first column)**:
```latex
\cvskillplainlegend
\cvskillplainlegend*[<post-padding>][<level1>][<level2>][<level3>][<level4>][<level5>]{<descriptor>}
```

**Header**:
```latex
\cvskillhead[<post-padding>][<level>][<skill>][<years>][<comment>]
```

**Entry**:
```latex
\cvskillentry*[<post-padding>]{<category>}{<0-5>}{<skill name>}{<years>}{<comment>}
% * = include dashed line
```

## Style Options

### Style-Specific Options
Pass options via:
```latex
\moderncvstyle[<option1>, <option2>, ...]{<style>}
```

**casual**:
- head_alignment: left, right (default)
- name: alternate (lowercase with color differentiation)
- data_in_head: details, nodetails (default)
- symbols: symbols (default), nosymbols

**classic**:
- alignment: left (default), right
- data_in_head: details, nodetails (default)
- symbols: symbols (default), nosymbols

**banking**:
- alignment: left (default), center, right
- rule_style: fullrules, shortrules, mixedrules (default), norules
- data_in_head: details, nodetails (default)
- symbols: symbols (default), nosymbols

**oldstyle**:
- data_in_head: details, nodetails (default)
- symbols: symbols (default), nosymbols

**fancy**:
- data_in_head: details, nodetails (default)
- symbols: symbols (default), nosymbols

**contemporary**:
- alignment: left (default), right
- data_in_head: details (default), nodetails
- qr: qr (default), noqr
- Recommended color: cerulean
- Recommended margins: `\usepackage[hmargin=0.5in,vmargin=10pt]{geometry}`

## Color Customization

### Load Order
```latex
\moderncvcolor{blue}  % Must be before style
\moderncvstyle{casual}
```

### Base Colors
```latex
% color0 = black (main text)
% color1 = theme color (blue, green, etc.)
% color2 = grey (user data, etc.)

\definecolor{color1}{rgb}{0.55, 0.55, 0.55}
\colorlet{color1}{black}
```

### Fine-Tuning Colors (casual style example)
```latex
% Head/footer
\colorlet{lastnamecolor}{color1}
\colorlet{namecolor}{lastnamecolor}
\colorlet{headrulecolor}{color1}
\colorlet{firstnamecolor}{lastnamecolor!50}
\colorlet{titlecolor}{color2}
\colorlet{addresscolor}{color2}
\colorlet{quotecolor}{color1}
\colorlet{pictureframecolor}{color1}

% Body
\colorlet{bodyrulecolor}{color1}
\colorlet{sectioncolor}{color1}
\colorlet{subsectioncolor}{color1}
\colorlet{hintstylecolor}{color0}

% Letter
\colorlet{letterclosingcolor}{color2}

% Skill matrix
\colorlet{skillmatrixfullcolor}{color1}
\colorlet{skillmatrixemptycolor}{color2!30}
```

## Icon/Symbol Customization

### Toggle Icons vs Letters
```latex
\moderncvicons{symbols|letters}  % Call after setting style
```

### Custom Icons
```latex
\renewcommand*{<\symbolcommand>}{{\small <\symbol>}~}
```

**Available symbol commands**: \addresssymbol, \mobilephonesymbol, \fixedphonesymbol, \faxphonesymbol, \emailsymbol, \homepagesymbol, \linkedinsocialsymbol, \xingsocialsymbol, \twittersocialsymbol, \githubsocialsymbol, \gitlabsocialsymbol, \stackoverflowsocialsymbol, \googlescholarsocialsymbol, \telegramsocialsymbol, \whatsappsocialsymbol, \signalsocialsymbol, \matrixsocialsymbol, \orcidsocialsymbol, \researchgatesocialsymbol, \researcheridsocialsymbol, \bitbucketsocialsymbol, \skypesocialsymbol, \bornsymbol, \arxivsocialsymbol, \inspiresocialsymbol

**Icon packages**: marvosym (pdflatex), fontawesome5 + academicons (lualatex/xelatex)

### Listing Labels
```latex
% For all lists
\renewcommand{\labelitemi}{-}
\renewcommand{\labelitemii}{-}
\renewcommand{\labelitemiii}{-}
\renewcommand{\labelitemiv}{-}

% For cvlistitem only
\renewcommand{\listitemsymbol}{-}
```

## Length Adjustments

### Hints Column
```latex
\setlength{\hintscolumnwidth}{3cm}
```

### Name Width (classic style)
```latex
\setlength{\makecvheadnamewidth}{10cm}  % Use with caution
```

### Column Separation
```latex
\setlength{\separatorcolumnwidth}{0.05\textwidth}  % Default: 0.025\textwidth
```

### List Item Symbol Space
```latex
\setlength{\listitemsymbolspace}{5pt}  % Default: 0pt
```

### Footer Width
```latex
\renewcommand*{\recomputefootlengths}{%
  \setlength{\footwidth}{0.9\textwidth}}  % Default: 0.8\textwidth
```

### Quote Width
```latex
\renewcommand*{\recomputecvheadlengths}{%
  \setlength{\quotewidth}{0.5\textwidth}}  % Default: 0.65\textwidth
```

### Skill Matrix Lengths

**Legend columns**:
```latex
\setcvskilllegendcolumns[<width>][<factor>]
% Examples:
\setcvskilllegendcolumns[][0.45]
\setcvskilllegendcolumns[\widthof{''Legend''}][0.45]
\setcvskilllegendcolumns[0ex][0.46]  % For banking style
```

**Skill columns**:
```latex
\setcvskillcolumns[<width>][<factor>][<exp_width>]
% Examples:
\setcvskillcolumns[5em][][]  % First column
\setcvskillcolumns[][0.45][]  % Third column (skill)
\setcvskillcolumns[][][\widthof{''Year''}]  % Fourth column (years)
\setcvskillcolumns[\widthof{''Language''}][0.48][]
```

## Link Commands

```latex
\link[<text>]{<link>}  % General link
\httplink[<text>]{<link>}  % HTTP (auto-prefix)
\httpslink[<text>]{<link>}  % HTTPS (auto-prefix)
\emaillink[<text>]{<link>}  % Email (auto-prefix mailto)
```

## Bibliography

```latex
% Show numerical labels
\renewcommand*{\bibliographyitemlabel}{[\arabic{enumiv}]}

% Change heading
\renewcommand{\refname}{Articles}

% Multiple bibliographies
\usepackage{multibib}
\newcites{book,misc}{{Books},{Others}}
```

**Note**: BibLaTeX not supported; incompatible with biber

## Cover Letter

### Recipient Data
```latex
\recipient{<Team/contact>}{<company>\\<street>\\<city>}
\date{<date>}
\subject{<subject>}
\opening{<greeting>}
\closing{<closing>}
\signature{<scale>}{<signature filename>}  % Optional
\enclosure[<label>]{<list of documents>}  % Optional
```

### Generate Letter
```latex
\makelettertitle
% [letter content]
\makeletterclosing
```

**CJK Note**: Add `\clearpage` after `\makeletterclosing` for proper page numbering

## Page Break Control

### Prevent Orphaned Headers
```latex
\setlength{\cvsectionstretchability}{\baselineskip}  % Default: 0.9\baselineskip
\setlength{\cvsubsectionstretchability}{100pt}  % Default: 0.9\baselineskip
```

### Manual Break
```latex
\newpage  % For consecutive section/subsection
```

### Expert Control
```latex
\renewcommand{\withinstretchpenalty}{<-100...9999>}  % Default: 0
\renewcommand{\poststretchpenalty}{<-100...9999>}  % Default: 9999
% Higher = less likely to break
```

## Pictures

```latex
\hspace{\hintscolumnwidth + \separatorcolumnwidth}\includegraphics[<scale>]{<filename>}
```

## Custom Styles

### Combine Style Parts
```latex
\moderncvhead{<1-6>}  % 1=casual, 2=classic, 3=banking, 4=oldstyle, 5=fancy, 6=contemporary
\moderncvbody{<1-6>}
\moderncvfoot{<1-6>}

% With options
\moderncvbody[fullrules]{3}
```

## Legal Disclaimer (Italy example)

```latex
\vfill
\begin{center}
\textit{\small Ai sensi del D. Lgs. 196/2003 ...}
\end{center}
```

## Known Issues

1. Skill matrices don't auto-break in fancy style
2. Long names break oldstyle (use `\\` for manual breaks)
3. Long URLs in classic may break name display
4. Fancy style adds unwanted space in bibliography
5. Footnotes generate errors (output correct with `-interaction=nonstopmode`)
6. CJK: `\clearpage` after letter kills lastpage counter
7. bibentry package causes "lonely \item" error (output correct)
8. Space after `\cventry` consumed when last arg has nested itemize (partial workaround implemented)
9. Incompatible with babel Spanish

## Required Packages

etoolbox, ifthen, xcolor, ifxetex/ifluatex, fontenc, url, hyperref, graphicx, fancyhdr, tweaklist, calc, xparse, microtype, expl3, tikz, changepage, fontawesome5, academicons, tgpagella, ebgaramond, kurier, multirow, arydshln

## Package Incompatibilities

- biber (incompatible)
- BibLaTeX (incompatible)
- babel with Spanish (incompatible)
